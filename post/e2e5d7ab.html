<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>AIX系统The largest dump device is too small问题 | Huiyangxu's IT Blog</title><meta name="author" content="Huiyangxu"><meta name="copyright" content="Huiyangxu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="问题报错今天巡检HIS的数据库服务器，发现小机AIX系统有大量的报错： 123456789101112131415[root@hisdb01:&#x2F;]errptIDENTIFIER TIMESTAMP  T C RESOURCE_NAME  DESCRIPTIONE87EF1BE   0207150025 P O dumpcheck      The largest dump device is to">
<meta property="og:type" content="article">
<meta property="og:title" content="AIX系统The largest dump device is too small问题">
<meta property="og:url" content="http://www.itxusir.com/post/e2e5d7ab.html">
<meta property="og:site_name" content="Huiyangxu&#39;s IT Blog">
<meta property="og:description" content="问题报错今天巡检HIS的数据库服务器，发现小机AIX系统有大量的报错： 123456789101112131415[root@hisdb01:&#x2F;]errptIDENTIFIER TIMESTAMP  T C RESOURCE_NAME  DESCRIPTIONE87EF1BE   0207150025 P O dumpcheck      The largest dump device is to">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.itxusir.com/img/top5.jpg">
<meta property="article:published_time" content="2025-10-13T14:22:00.000Z">
<meta property="article:modified_time" content="2025-10-24T08:05:35.089Z">
<meta property="article:author" content="Huiyangxu">
<meta property="article:tag" content="aix">
<meta property="article:tag" content="dump">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.itxusir.com/img/top5.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "AIX系统The largest dump device is too small问题",
  "url": "http://www.itxusir.com/post/e2e5d7ab.html",
  "image": "http://www.itxusir.com/img/top5.jpg",
  "datePublished": "2025-10-13T14:22:00.000Z",
  "dateModified": "2025-10-24T08:05:35.089Z",
  "author": [
    {
      "@type": "Person",
      "name": "Huiyangxu",
      "url": "http://www.itxusir.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.itxusir.com/post/e2e5d7ab.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'AIX系统The largest dump device is too small问题',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/middle.css"><link rel="stylesheet" href="/css/transparent.css"><link rel="stylesheet" href="/css/waves.css"><meta name="generator" content="Hexo 8.0.0"><link rel="alternate" href="/atom.xml" title="Huiyangxu's IT Blog" type="application/atom+xml">
</head><body><div id="web_bg" style="background-image: url(/img/background_now.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archive</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-folder-open"></i><span> Article list</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-file-text"></i><span> categories</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Break</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/break/"><i class="fa-fw fas fa-heart"></i><span> video clip</span></a></li><li><a class="site-page child" href="/news/"><i class="fa-fw fas fa-newspaper"></i><span> News-60S</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/top5.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Huiyangxu's IT Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">AIX系统The largest dump device is too small问题</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archive</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-folder-open"></i><span> Article list</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-file-text"></i><span> categories</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> Break</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/break/"><i class="fa-fw fas fa-heart"></i><span> video clip</span></a></li><li><a class="site-page child" href="/news/"><i class="fa-fw fas fa-newspaper"></i><span> News-60S</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">AIX系统The largest dump device is too small问题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-10-13T14:22:00.000Z" title="Created 2025-10-13 22:22:00">2025-10-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-24T08:05:35.089Z" title="Updated 2025-10-24 16:05:35">2025-10-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/AIX/">AIX</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">2.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>13mins</span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="问题报错"><a href="#问题报错" class="headerlink" title="问题报错"></a>问题报错</h2><p>今天巡检HIS的数据库服务器，发现小机AIX系统有大量的报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]errpt</span><br><span class="line">IDENTIFIER TIMESTAMP  T C RESOURCE_NAME  DESCRIPTION</span><br><span class="line">E87EF1BE   0207150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0206150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0205150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0204150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0203150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0202150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0201150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0131150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0130150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0129150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0128150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0127150025 P O dumpcheck      The largest dump device is too small.</span><br><span class="line">E87EF1BE   0126150025 P O dumpcheck      The largest dump device is too small.</span><br></pre></td></tr></table></figure>

<p>关于AIX报错errpt有具体含义如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">这里的输出分为六列依次为：</span><br><span class="line"></span><br><span class="line">1．错误标示符IDENTIFIER：并不唯一，由它来确定使用的错误模板，显然同一种错误的IDENTIFIER是相同的。</span><br><span class="line"></span><br><span class="line">2．时间戳TIMESTAMP：错误发生的时间，MMDDhhmmYY,依次表示月日时分年。</span><br><span class="line"></span><br><span class="line">3．类型TYPE：错误的类型，或者说严重的程度，共分为6种：</span><br><span class="line">PEND 设备或功能组件可能丢失 简写P</span><br><span class="line">PERF 性能严重下降 P</span><br><span class="line">PERM 硬件设备或软件模块损坏，确诊了的 P</span><br><span class="line">TEMP 临时性错误，经过重试后已经恢复正常 T</span><br><span class="line">INFO 一般消息，不是错误 I</span><br><span class="line">UNKN 不能确定错误的严重性 U</span><br><span class="line"></span><br><span class="line">4．种类CLASS c:指出错误源</span><br><span class="line">H 硬件故障 Hardware</span><br><span class="line">S 软件故障 Software</span><br><span class="line">O 人为操作 Operation</span><br><span class="line">U 不能确定 Unknown</span><br><span class="line"></span><br><span class="line">5． 资源名RESOURCE_NAME</span><br><span class="line">最初检测到错误的资源名软件或者硬件，并不代表这个资源有问题，而只是最先在它发现的。</span><br><span class="line"></span><br><span class="line">6．描述</span><br><span class="line">具体的错误代表的意义可以打IBM的支持热线寻求帮助。</span><br></pre></td></tr></table></figure>

<h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>那么让我们查看一下报错的具体内容是什么，使用errpt -aj E87EF1BE |more进行分页查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">---------------------------------------------------------------------------</span><br><span class="line">LABEL:          DMPCHK_TOOSMALL</span><br><span class="line">IDENTIFIER:     E87EF1BE</span><br><span class="line"></span><br><span class="line">Date/Time:       Fri Feb  7 15:00:00 CST 2025</span><br><span class="line">Sequence Number: 498</span><br><span class="line">Machine Id:      00CB4D104B00</span><br><span class="line">Node Id:         hisdb02</span><br><span class="line">Class:           O</span><br><span class="line">Type:            PEND</span><br><span class="line">WPAR:            Global</span><br><span class="line">Resource Name:   dumpcheck       </span><br><span class="line"></span><br><span class="line">Description</span><br><span class="line">The largest dump device is too small.</span><br><span class="line"></span><br><span class="line">Probable Causes</span><br><span class="line">Neither dump device is large enough to accommodate a system dump at this time.</span><br><span class="line"></span><br><span class="line">        Recommended Actions</span><br><span class="line">        Increase the size of one or both dump devices.</span><br><span class="line"></span><br><span class="line">Detail Data</span><br><span class="line">Largest dump device</span><br><span class="line">lg_dumplv                                                                                                                       </span><br><span class="line">Largest dump device size in kb</span><br><span class="line">     4194304</span><br><span class="line">Current estimated dump size in kb</span><br><span class="line">     4637388</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">LABEL:          DMPCHK_TOOSMALL</span><br><span class="line">IDENTIFIER:     E87EF1BE</span><br></pre></td></tr></table></figure>

<p>根据上述的内容可以看出Probable Causes的原因是lg_dumplv空间不足导致的，设置的大小是4194304，实际的大小是</p>
<p>4637388，因此报错。关于<strong>dump devices</strong> IBM的描述如下：</p>
<blockquote>
<p>When an unexpected system halt occurs, the system dump facility automatically copies selected areas of kernel data to the primary dump device. These areas include kernel segment 0, and other areas registered in the Master Dump Table by kernel modules or kernel extensions.</p>
<p>当系统意外停止时，系统转储工具会自动将内核数据的选定区域复制到主转储设备。这些区域包括内核段 0 以及内核模块或内核扩展在 Master Dump Table 中注册的其他区域。</p>
</blockquote>
<p>可以通过命令查看当前大小</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]sysdumpdev -e</span><br><span class="line">0453-041 Estimated dump size in bytes: 4505080954</span><br></pre></td></tr></table></figure>

<p>比较有意思的就是这个报错总在每天的15点报错，这是为啥呢。其实是系统的默认定时任务</p>
<p>通过crontab -l可以看到每天15：00有个默认的任务执行&#x2F;usr&#x2F;lib&#x2F;ras&#x2F;dumpcheck</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]crontab -l</span><br><span class="line"># @(#)08        1.15.1.3  src/bos/usr/sbin/cron/root, cmdcntl, bos720 2/11/94 17:19:47</span><br><span class="line"># IBM_PROLOG_BEGIN_TAG </span><br><span class="line"># This is an automatically generated prolog. </span><br><span class="line">#  </span><br><span class="line"># bos720 src/bos/usr/sbin/cron/root 1.15.1.3 </span><br><span class="line">#  </span><br><span class="line"># Licensed Materials - Property of IBM </span><br><span class="line">#  </span><br><span class="line"># COPYRIGHT International Business Machines Corp. 1989,1994 </span><br><span class="line"># All Rights Reserved </span><br><span class="line">#  </span><br><span class="line"># US Government Users Restricted Rights - Use, duplication or </span><br><span class="line"># disclosure restricted by GSA ADP Schedule Contract with IBM Corp. </span><br><span class="line">#  </span><br><span class="line"># IBM_PROLOG_END_TAG </span><br><span class="line">#</span><br><span class="line"># COMPONENT_NAME: (CMDCNTL) commands needed for basic system needs</span><br><span class="line">#</span><br><span class="line"># FUNCTIONS: </span><br><span class="line">#</span><br><span class="line"># ORIGINS: 27</span><br><span class="line">#</span><br><span class="line"># (C) COPYRIGHT International Business Machines Corp. 1989,1994</span><br><span class="line"># All Rights Reserved</span><br><span class="line"># Licensed Materials - Property of IBM</span><br><span class="line">#</span><br><span class="line"># US Government Users Restricted Rights - Use, duplication or</span><br><span class="line"># disclosure restricted by GSA ADP Schedule Contract with IBM Corp.</span><br><span class="line">#</span><br><span class="line">#0 3 * * * /usr/sbin/skulker</span><br><span class="line">#45 2 * * 0 /usr/lib/spell/compress</span><br><span class="line">#45 23 * * * ulimit 5000; /usr/lib/smdemon.cleanu &gt; /dev/null</span><br><span class="line">0 11 * * * /usr/bin/errclear -d S,O 30</span><br><span class="line">0 12 * * * /usr/bin/errclear -d H 90</span><br><span class="line">0,5,10,15,20,25,30,35,40,45,50,55 * * * * /usr/sbin/dumpctrl -k &gt;/dev/null 2&gt;/dev/null</span><br><span class="line">0 15 * * *  /usr/lib/ras/dumpcheck &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">30 23 * * * /usr/sbin/ntpdate 192.168.50.250</span><br><span class="line">0 0 * * * /usr/bin/nmon -f -N -m /nmon -s 30 -c 2880</span><br></pre></td></tr></table></figure>

<p>我们来简单看一下这个命令的作用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]/usr/lib/ras/dumpcheck -h</span><br><span class="line">getopt: Not a recognized flag: h</span><br><span class="line">Usage:</span><br><span class="line">dumpcheck [[-l] [-p ] [-t time-parameters] [-P ]]</span><br><span class="line">dumpcheck [-r ]</span><br><span class="line"></span><br><span class="line">Checks to see that the dump device and copy directory </span><br><span class="line">are able to receive the system dump.</span><br><span class="line"></span><br><span class="line">-l                      Log any warnings to the error log. </span><br><span class="line">-p                      Print any warnings produced to stdout.</span><br><span class="line">-r                      Remove the crontab entry for this function.</span><br><span class="line">-P                      Indicates that the changes are to be made permenently.</span><br><span class="line">-t time-parameters      Change the time when dumpcheck is executed.</span><br><span class="line"></span><br><span class="line">The -r parameter must be specified alone, </span><br><span class="line">(i.e.) it is not valid with any other parameters. </span><br></pre></td></tr></table></figure>

<p>执行一下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]/usr/lib/ras/dumpcheck -p</span><br><span class="line">The largest dump device is too small.</span><br><span class="line"></span><br><span class="line">Largest dump device</span><br><span class="line">         lg_dumplv</span><br><span class="line">Largest dump device size in kb</span><br><span class="line">         4194304</span><br><span class="line">Current estimated dump size in kb</span><br><span class="line">         4637388</span><br></pre></td></tr></table></figure>

<h2 id="问题处理"><a href="#问题处理" class="headerlink" title="问题处理"></a>问题处理</h2><p>即然确定了问题哪里来的，下面进行一下问题fix，先确认一下lg_dumplv分配的大小，默认分配的是4G（PPS&#x3D;4，PP SIZE&#x3D;1024M）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]lslv lg_dumplv</span><br><span class="line">LOGICAL VOLUME:     lg_dumplv              VOLUME GROUP:   rootvg</span><br><span class="line">LV IDENTIFIER:      00cb47b000004b0000000189e0b21f89.12 PERMISSION:     read/write</span><br><span class="line">VG STATE:           active/complete        LV STATE:       opened/syncd</span><br><span class="line">TYPE:               sysdump                WRITE VERIFY:   off</span><br><span class="line">MAX LPs:            512                    PP SIZE:        1024 megabyte(s)</span><br><span class="line">COPIES:             1                      SCHED POLICY:   parallel</span><br><span class="line">LPs:                4                      PPs:            4</span><br><span class="line">STALE PPs:          0                      BB POLICY:      relocatable</span><br><span class="line">INTER-POLICY:       minimum                RELOCATABLE:    yes</span><br><span class="line">INTRA-POLICY:       middle                 UPPER BOUND:    32</span><br><span class="line">MOUNT POINT:        N/A                    LABEL:          None</span><br><span class="line">MIRROR WRITE CONSISTENCY: on/ACTIVE                              </span><br><span class="line">EACH LP COPY ON A SEPARATE PV ?: yes                                    </span><br><span class="line">Serialize IO ?:     NO                                     </span><br><span class="line">INFINITE RETRY:     no                     PREFERRED READ: 0</span><br><span class="line">ENCRYPTION:         no                                     </span><br></pre></td></tr></table></figure>

<p>lg_dumplv来自于系统rootvg，该LV为非mirror lv，可以看到lg_dumplov来自于hdisk0磁盘上。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]lsvg -l rootvg</span><br><span class="line">rootvg:</span><br><span class="line">LV NAME             TYPE       LPs     PPs     PVs  LV STATE      MOUNT POINT</span><br><span class="line">hd5                 boot       1       2       2    closed/syncd  N/A</span><br><span class="line">hd6                 paging     33      66      2    open/syncd    N/A</span><br><span class="line">hd8                 jfs2log    1       2       2    open/syncd    N/A</span><br><span class="line">hd4                 jfs2       50      100     2    open/syncd    /</span><br><span class="line">hd2                 jfs2       10      20      2    open/syncd    /usr</span><br><span class="line">hd9var              jfs2       10      20      2    open/syncd    /var</span><br><span class="line">hd3                 jfs2       10      20      2    open/syncd    /tmp</span><br><span class="line">hd1                 jfs2       1       2       2    open/syncd    /home</span><br><span class="line">hd10opt             jfs2       10      20      2    open/syncd    /opt</span><br><span class="line">hd11admin           jfs2       1       2       2    open/syncd    /admin</span><br><span class="line">fwdump              jfs2       3       6       2    open/syncd    /var/adm/ras/platform</span><br><span class="line">lg_dumplv           sysdump    6       6       1    open/syncd    N/A</span><br><span class="line">livedump            jfs2       1       2       2    open/syncd    /var/adm/ras/livedump</span><br><span class="line">fslv00              jfs2       100     200     2    open/syncd    /u01</span><br><span class="line">fslv01              jfs2       100     200     2    open/syncd    /g01</span><br><span class="line">[root@hisdb01:/]lspv -l hdisk0</span><br><span class="line">hdisk0:</span><br><span class="line">LV NAME               LPs     PPs     DISTRIBUTION          MOUNT POINT</span><br><span class="line">fwdump                3       3       00..03..00..00..00    /var/adm/ras/platform</span><br><span class="line">hd11admin             1       1       00..00..01..00..00    /admin</span><br><span class="line">livedump              1       1       00..01..00..00..00    /var/adm/ras/livedump</span><br><span class="line">lg_dumplv             6       6       00..06..00..00..00    N/A</span><br><span class="line">fslv01                100     100     00..00..43..57..00    /g01</span><br><span class="line">fslv00                100     100     100..00..00..00..00   /u01</span><br><span class="line">hd5                   1       1       01..00..00..00..00    N/A</span><br><span class="line">hd6                   33      33      00..33..00..00..00    N/A</span><br><span class="line">hd8                   1       1       00..00..01..00..00    N/A</span><br><span class="line">hd4                   50      50      00..30..20..00..00    /</span><br><span class="line">hd2                   10      10      00..00..10..00..00    /usr</span><br><span class="line">hd9var                10      10      00..00..10..00..00    /var</span><br><span class="line">hd3                   10      10      00..00..10..00..00    /tmp</span><br><span class="line">hd1                   1       1       00..00..01..00..00    /home</span><br><span class="line">hd10opt               10      10      00..00..10..00..00    /opt</span><br><span class="line">[root@hisdb01:/]lspv -l hdisk1</span><br><span class="line">hdisk1:</span><br><span class="line">LV NAME               LPs     PPs     DISTRIBUTION          MOUNT POINT</span><br><span class="line">fwdump                3       3       00..03..00..00..00    /var/adm/ras/platform</span><br><span class="line">hd11admin             1       1       00..00..01..00..00    /admin</span><br><span class="line">livedump              1       1       00..01..00..00..00    /var/adm/ras/livedump</span><br><span class="line">fslv01                100     100     00..00..43..57..00    /g01</span><br><span class="line">fslv00                100     100     100..00..00..00..00   /u01</span><br><span class="line">hd5                   1       1       01..00..00..00..00    N/A</span><br><span class="line">hd6                   33      33      00..33..00..00..00    N/A</span><br><span class="line">hd8                   1       1       00..00..01..00..00    N/A</span><br><span class="line">hd4                   50      50      00..30..20..00..00    /</span><br><span class="line">hd2                   10      10      00..00..10..00..00    /usr</span><br><span class="line">hd9var                10      10      00..00..10..00..00    /var</span><br><span class="line">hd3                   10      10      00..00..10..00..00    /tmp</span><br><span class="line">hd1                   1       1       00..00..01..00..00    /home</span><br><span class="line">hd10opt               10      10      00..00..10..00..00    /opt</span><br></pre></td></tr></table></figure>

<p>检查一下rootvg是否有可用空间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]lsvg rootvg</span><br><span class="line">VOLUME GROUP:       rootvg                   VG IDENTIFIER:  00cb47b000004b0000000189e0b21f89</span><br><span class="line">VG STATE:           active                   PP SIZE:        1024 megabyte(s)</span><br><span class="line">VG PERMISSION:      read/write               TOTAL PPs:      1064 (1089536 megabytes)</span><br><span class="line">MAX LVs:            256                      FREE PPs:       398 (407552 megabytes)</span><br><span class="line">LVs:                15                       USED PPs:       666 (681984 megabytes)</span><br><span class="line">OPEN LVs:           14                       QUORUM:         1 (Disabled)</span><br><span class="line">TOTAL PVs:          2                        VG DESCRIPTORS: 3</span><br><span class="line">STALE PVs:          0                        STALE PPs:      0</span><br><span class="line">ACTIVE PVs:         2                        AUTO ON:        yes</span><br><span class="line">MAX PPs per VG:     32512                                     </span><br><span class="line">MAX PPs per PV:     1016                     MAX PVs:        32</span><br><span class="line">LTG size (Dynamic): 256 kilobyte(s)          AUTO SYNC:      no</span><br><span class="line">HOT SPARE:          no                       BB POLICY:      relocatable </span><br><span class="line">PV RESTRICTION:     none                     INFINITE RETRY: no</span><br><span class="line">DISK BLOCK SIZE:    512                      CRITICAL VG:    no</span><br><span class="line">FS SYNC OPTION:     no                       CRITICAL PVs:   no</span><br><span class="line">ENCRYPTION:         no                                        </span><br></pre></td></tr></table></figure>

<p>执行lg_dumplv扩容，之后再查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]extendlv lg_dumplv 2</span><br><span class="line">[root@hisdb01:/]lslv lg_dumplv</span><br><span class="line">LOGICAL VOLUME:     lg_dumplv              VOLUME GROUP:   rootvg</span><br><span class="line">LV IDENTIFIER:      00cb47b000004b0000000189e0b21f89.12 PERMISSION:     read/write</span><br><span class="line">VG STATE:           active/complete        LV STATE:       opened/syncd</span><br><span class="line">TYPE:               sysdump                WRITE VERIFY:   off</span><br><span class="line">MAX LPs:            512                    PP SIZE:        1024 megabyte(s)</span><br><span class="line">COPIES:             1                      SCHED POLICY:   parallel</span><br><span class="line">LPs:                6                      PPs:            6</span><br><span class="line">STALE PPs:          0                      BB POLICY:      relocatable</span><br><span class="line">INTER-POLICY:       minimum                RELOCATABLE:    yes</span><br><span class="line">INTRA-POLICY:       middle                 UPPER BOUND:    32</span><br><span class="line">MOUNT POINT:        N/A                    LABEL:          None</span><br><span class="line">MIRROR WRITE CONSISTENCY: on/ACTIVE                              </span><br><span class="line">EACH LP COPY ON A SEPARATE PV ?: yes                                    </span><br><span class="line">Serialize IO ?:     NO                                     </span><br><span class="line">INFINITE RETRY:     no                     PREFERRED READ: 0</span><br><span class="line">ENCRYPTION:         no             </span><br></pre></td></tr></table></figure>

<p>这时再查看，可以看到rootvg的FREE PPS少了2个。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]lsvg rootvg</span><br><span class="line">VOLUME GROUP:       rootvg                   VG IDENTIFIER:  00cb47b000004b0000000189e0b21f89</span><br><span class="line">VG STATE:           active                   PP SIZE:        1024 megabyte(s)</span><br><span class="line">VG PERMISSION:      read/write               TOTAL PPs:      1064 (1089536 megabytes)</span><br><span class="line">MAX LVs:            256                      FREE PPs:       396 (405504 megabytes)</span><br><span class="line">LVs:                15                       USED PPs:       668 (684032 megabytes)</span><br><span class="line">OPEN LVs:           14                       QUORUM:         1 (Disabled)</span><br><span class="line">TOTAL PVs:          2                        VG DESCRIPTORS: 3</span><br><span class="line">STALE PVs:          0                        STALE PPs:      0</span><br><span class="line">ACTIVE PVs:         2                        AUTO ON:        yes</span><br><span class="line">MAX PPs per VG:     32512                                     </span><br><span class="line">MAX PPs per PV:     1016                     MAX PVs:        32</span><br><span class="line">LTG size (Dynamic): 256 kilobyte(s)          AUTO SYNC:      no</span><br><span class="line">HOT SPARE:          no                       BB POLICY:      relocatable </span><br><span class="line">PV RESTRICTION:     none                     INFINITE RETRY: no</span><br><span class="line">DISK BLOCK SIZE:    512                      CRITICAL VG:    no</span><br><span class="line">FS SYNC OPTION:     no                       CRITICAL PVs:   no</span><br><span class="line">ENCRYPTION:         no                                        </span><br></pre></td></tr></table></figure>

<p>由于这台服务器再没有别的报错，那么我们手动清空下报错，再手动check一下。确认无报错产生，问题解决完毕。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@hisdb01:/]errclear 0</span><br><span class="line">[root@hisdb01:/]errpt</span><br><span class="line">[root@hisdb01:/]/usr/lib/ras/dumpcheck</span><br><span class="line">[root@hisdb01:/]errpt</span><br></pre></td></tr></table></figure>

<h2 id="此问题产生的原因"><a href="#此问题产生的原因" class="headerlink" title="此问题产生的原因"></a>此问题产生的原因</h2><p><strong>默认的lg_dumplv大小</strong></p>
<p>在AIX 系统中的lg_dumplv 逻辑卷是用于存放系统dump 的区域。 在安装系统时是否创建该逻辑卷与服务器的内存配置有关。 若服务器的内存小于4GB时, 那么在安装 AIX 5.2 或 5.3时，系统就不会自动创建它。而缺省将系统dump 存放在hd6上。 当服务器的内存大于4GB时，在安装AIX时，就会为系统 dump 创建一专用区域，该逻辑卷名就是 lg_dumplv. 其缺省大小是按以下规则分配的： . 4GB &lt; &#x3D; 服务器的内存 〈 12GB lg_dump 的大小为 1GB . 12GB &lt; &#x3D; 服务器的内存 〈 24GB lg_dump 的大小为 2GB . 24GB &lt; &#x3D; 服务器的内存 〈 48GB lg_dump 的大小为 3GB . 48GB &lt; &#x3D; 服务器的内存 lg_dump 的大小为 4GB</p>
<p>我这台服务器是128G内存的，因此默认的lg_dumplv大小为4G也符合。</p>
<p><strong>关于dumpcheck</strong></p>
<p><strong>&#x2F;usr&#x2F;lib&#x2F;ras&#x2F;dumpcheck</strong> 命令用来检查系统转储使用的磁盘资源。 如果最大转储设备不足以接收转储，或者转储调页空间时，在拷贝目录中空间不够，该命令就记录一个错误。</p>
<p><strong>dumpcheck</strong> 通常是每天在当地时间下午 3 点由守护程序运行。 当使用 <strong>-r</strong> 标志从根目录的 <strong>crontab</strong> 中删除或者使用 <strong>-t</strong> <em>TimeParameters</em>，更改转储检查的运行时间时，这可能有所变化。 也可以从 SMIT 进行配置。 安装服务辅助时， <strong>dumpcheck</strong> 会自动添加到 root 用户的 <strong>crontab</strong> 。</p>
<p>要取得最大效力，应该是在系统负载最大时运行 <strong>dumpcheck</strong>。 这些时候，系统的转储最有可能是它的最大值。 同样，即使使用 <strong>dumpcheck</strong> 观察转储的大小，仍然可能发生转储在转储装置或者是发生时在拷贝目录中不合适。 如果在转储时间刚好有一个系统负载高峰，这也可能发生。</p>
<p>然而默认转储设备通常不够大，无法进行完整转储，因此会有这个定时任务定时检查，并在不足的时候报错提示进行扩展。</p>
<p>这里提供一些参考</p>
<p>[管理系统转储设备]:</p>
<p><a target="_blank" rel="noopener" href="https://www.ibm.com/support/pages/managing-system-dump-devices">https://www.ibm.com/support/pages/managing-system-dump-devices</a></p>
<p>[dumpcheck 命令 - IBM 文档]:</p>
<p><a target="_blank" rel="noopener" href="https://www.ibm.com/docs/zh/aix/7.3?topic=d-dumpcheck-command">https://www.ibm.com/docs/zh/aix/7.3?topic=d-dumpcheck-command</a></p>
<p>欢迎联系我一起讨论。我的微信号：Eric_xu_2023</p>
<p>也欢迎关注我的公众号：</p>
<img alt="1.png" src="https://oss-emcsprod-public.modb.pro/image/editor/20251010-1976625582993584128_3605.png" referrerpolicy="no-referrer"/></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://www.itxusir.com">Huiyangxu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://www.itxusir.com/post/e2e5d7ab.html">http://www.itxusir.com/post/e2e5d7ab.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/aix/">aix</a><a class="post-meta__tags" href="/tags/dump/">dump</a></div><div class="post-share"><div class="social-share" data-image="/img/top5.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/post/d543d14a.html" title="IBM_AIX平台搭建GPFS集群演示"><img class="cover" src="/img/top7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">IBM_AIX平台搭建GPFS集群演示</div></div><div class="info-2"><div class="info-item-1">早年间的实施记录，重新排版了一下： 基础环境当年是计划做一套10G的rac： 1、用的主机是两台IBM P740； 2、硬件存储使用的是V7000； 3、使用共享存储搭建GPFS集群文件系统给ORACLE做存储。 当时一共划了4块磁盘hdisk1-hdisk4(hdisk0系统用了，raid5)，做好主机层面多路径后，主机识别磁盘，开始下面的操作。 搭建过程记录创建配置文件目录 123mkdir -p /etc/gpfscd /etc/gpfs/touch nodeslist  编辑文件 123bash-3.2# cat nodeslistp740-gpfs1:manager-quorump740-gpfs2:manager-quorum  PATH里添加gpfs命令目录 12bash-3.2# echo $PATH/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java5/jre/bin:/usr/java5/bin:/usr/lpp/mmfs/bin:/u01/app/oracle/crs/bin    修改磁...</div></div></div></a><a class="pagination-related" href="/post/4358307c.html" title="AIX平台下Oracle 11g RAC修改PUBLIC/VIP/SCAN"><img class="cover" src="/img/top2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">AIX平台下Oracle 11g RAC修改PUBLIC/VIP/SCAN</div></div><div class="info-2"><div class="info-item-1">当前环境由于机房网络变更，客户要修改现在RAC的public&#x2F;vip&#x2F;scan地址，这里记录一下。 主机操作系统：AIX 7.2 数据库版本：11.2.0.4 rac 数据库实例名：orcl1&#x2F;orcl2 当前hosts文件配置 1234567192.168.56.10   rac1192.168.56.11   rac210.10.10.1      rac1-priv10.10.10.2      rac2-priv192.168.56.12   rac1-vip192.168.56.13   rac2-vip192.168.56.14   rac-scan  计划修改后的IP地址（priv-IP由于两台服务器直连不过交换机，保持不变） 1234567192.168.56.120   rac1192.168.56.121   rac210.10.10.1      rac1-priv10.10.10.2      rac2-priv192.168.56.122   rac1-vip192.168.56.123   rac2-vip192.168....</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/post/4358307c.html" title="AIX平台下Oracle 11g RAC修改PUBLIC&#x2F;VIP&#x2F;SCAN"><img class="cover" src="/img/top2.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-13</div><div class="info-item-2">AIX平台下Oracle 11g RAC修改PUBLIC&#x2F;VIP&#x2F;SCAN</div></div><div class="info-2"><div class="info-item-1">当前环境由于机房网络变更，客户要修改现在RAC的public&#x2F;vip&#x2F;scan地址，这里记录一下。 主机操作系统：AIX 7.2 数据库版本：11.2.0.4 rac 数据库实例名：orcl1&#x2F;orcl2 当前hosts文件配置 1234567192.168.56.10   rac1192.168.56.11   rac210.10.10.1      rac1-priv10.10.10.2      rac2-priv192.168.56.12   rac1-vip192.168.56.13   rac2-vip192.168.56.14   rac-scan  计划修改后的IP地址（priv-IP由于两台服务器直连不过交换机，保持不变） 1234567192.168.56.120   rac1192.168.56.121   rac210.10.10.1      rac1-priv10.10.10.2      rac2-priv192.168.56.122   rac1-vip192.168.56.123   rac2-vip192.168....</div></div></div></a><a class="pagination-related" href="/post/d543d14a.html" title="IBM_AIX平台搭建GPFS集群演示"><img class="cover" src="/img/top7.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-14</div><div class="info-item-2">IBM_AIX平台搭建GPFS集群演示</div></div><div class="info-2"><div class="info-item-1">早年间的实施记录，重新排版了一下： 基础环境当年是计划做一套10G的rac： 1、用的主机是两台IBM P740； 2、硬件存储使用的是V7000； 3、使用共享存储搭建GPFS集群文件系统给ORACLE做存储。 当时一共划了4块磁盘hdisk1-hdisk4(hdisk0系统用了，raid5)，做好主机层面多路径后，主机识别磁盘，开始下面的操作。 搭建过程记录创建配置文件目录 123mkdir -p /etc/gpfscd /etc/gpfs/touch nodeslist  编辑文件 123bash-3.2# cat nodeslistp740-gpfs1:manager-quorump740-gpfs2:manager-quorum  PATH里添加gpfs命令目录 12bash-3.2# echo $PATH/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java5/jre/bin:/usr/java5/bin:/usr/lpp/mmfs/bin:/u01/app/oracle/crs/bin    修改磁...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Huiyangxu</div><div class="author-info-description">Follow my blog, and let us learn IT technology together</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><a id="card-info-btn" href="/img/weixin.jpg"><i class="fab fa-weixin"></i><span>Contact me on WeChat</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/it-xusir/" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:huiyangxu@hotmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa fa-rss" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/435622984?spm_id_from=333.1007.0.0" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Follow my WeChat Official Account! <img src="/img/wechat.jpg" alt="公告图片描述" style="max-width:100%;height:auto;"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%8A%A5%E9%94%99"><span class="toc-number">1.</span> <span class="toc-text">问题报错</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">2.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">问题处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A4%E9%97%AE%E9%A2%98%E4%BA%A7%E7%94%9F%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">4.</span> <span class="toc-text">此问题产生的原因</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/709b78ae.html" title="使用Oracle oswatcher工具监控服务器性能并生成图形报告"><img src="/img/top1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Oracle oswatcher工具监控服务器性能并生成图形报告"/></a><div class="content"><a class="title" href="/post/709b78ae.html" title="使用Oracle oswatcher工具监控服务器性能并生成图形报告">使用Oracle oswatcher工具监控服务器性能并生成图形报告</a><time datetime="2025-10-17T11:00:00.000Z" title="Created 2025-10-17 19:00:00">2025-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/2b862cbb.html" title="在Centos7.9上安装netbackup 9.1服务器端"><img src="/img/top8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Centos7.9上安装netbackup 9.1服务器端"/></a><div class="content"><a class="title" href="/post/2b862cbb.html" title="在Centos7.9上安装netbackup 9.1服务器端">在Centos7.9上安装netbackup 9.1服务器端</a><time datetime="2025-10-17T00:00:00.000Z" title="Created 2025-10-17 08:00:00">2025-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/b6540e26.html" title="OracleLinux快速配置多路径multipath"><img src="/img/top2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OracleLinux快速配置多路径multipath"/></a><div class="content"><a class="title" href="/post/b6540e26.html" title="OracleLinux快速配置多路径multipath">OracleLinux快速配置多路径multipath</a><time datetime="2025-10-16T12:00:00.000Z" title="Created 2025-10-16 20:00:00">2025-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/d477c414.html" title="OEL7挂载ISCSI存储配置示例"><img src="/img/top3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OEL7挂载ISCSI存储配置示例"/></a><div class="content"><a class="title" href="/post/d477c414.html" title="OEL7挂载ISCSI存储配置示例">OEL7挂载ISCSI存储配置示例</a><time datetime="2025-10-14T09:00:00.000Z" title="Created 2025-10-14 17:00:00">2025-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/d543d14a.html" title="IBM_AIX平台搭建GPFS集群演示"><img src="/img/top7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IBM_AIX平台搭建GPFS集群演示"/></a><div class="content"><a class="title" href="/post/d543d14a.html" title="IBM_AIX平台搭建GPFS集群演示">IBM_AIX平台搭建GPFS集群演示</a><time datetime="2025-10-14T01:00:00.000Z" title="Created 2025-10-14 09:00:00">2025-10-14</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Huiyangxu</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'it-xusir/it-xusir.github.io',
      'data-repo-id': 'R_kgDOP3up8g',
      'data-category-id': 'DIC_kwDOP3up8s4Cwqtj',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script src="/js/snowflake.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading Database</span></div><div class="local-search-input"><input placeholder="搜索一下你想要的关键字" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.1"></script></div></div></body></html>